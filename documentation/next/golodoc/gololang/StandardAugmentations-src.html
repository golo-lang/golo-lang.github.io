<!DOCTYPE html>

<html>
<head>
  <title>gololang.StandardAugmentations source</title>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <style>
    pre {
        font-family: monospace;
        font-size: 90%;
        background-color: #eee;
        padding: 0;
        margin: 0;
    }

    pre code {
        font-family: monospace;
        font-size: inherit;
        padding: 0.5em ;
        margin: 0;
    }

    :target {
        background-color: yellow;
    }

    #line-numbers {
        float: left;
        position: relative;
        padding: 0.5em;
    }

    #src {
        float: left;
        position: relative;
    }
  </style>
</head>
<body>
<pre id="line-numbers">
<span class="line-number" id="l-1">1</span>
<span class="line-number" id="l-2">2</span>
<span class="line-number" id="l-3">3</span>
<span class="line-number" id="l-4">4</span>
<span class="line-number" id="l-5">5</span>
<span class="line-number" id="l-6">6</span>
<span class="line-number" id="l-7">7</span>
<span class="line-number" id="l-8">8</span>
<span class="line-number" id="l-9">9</span>
<span class="line-number" id="l-10">10</span>
<span class="line-number" id="l-11">11</span>
<span class="line-number" id="l-12">12</span>
<span class="line-number" id="l-13">13</span>
<span class="line-number" id="l-14">14</span>
<span class="line-number" id="l-15">15</span>
<span class="line-number" id="l-16">16</span>
<span class="line-number" id="l-17">17</span>
<span class="line-number" id="l-18">18</span>
<span class="line-number" id="l-19">19</span>
<span class="line-number" id="l-20">20</span>
<span class="line-number" id="l-21">21</span>
<span class="line-number" id="l-22">22</span>
<span class="line-number" id="l-23">23</span>
<span class="line-number" id="l-24">24</span>
<span class="line-number" id="l-25">25</span>
<span class="line-number" id="l-26">26</span>
<span class="line-number" id="l-27">27</span>
<span class="line-number" id="l-28">28</span>
<span class="line-number" id="l-29">29</span>
<span class="line-number" id="l-30">30</span>
<span class="line-number" id="l-31">31</span>
<span class="line-number" id="l-32">32</span>
<span class="line-number" id="l-33">33</span>
<span class="line-number" id="l-34">34</span>
<span class="line-number" id="l-35">35</span>
<span class="line-number" id="l-36">36</span>
<span class="line-number" id="l-37">37</span>
<span class="line-number" id="l-38">38</span>
<span class="line-number" id="l-39">39</span>
<span class="line-number" id="l-40">40</span>
<span class="line-number" id="l-41">41</span>
<span class="line-number" id="l-42">42</span>
<span class="line-number" id="l-43">43</span>
<span class="line-number" id="l-44">44</span>
<span class="line-number" id="l-45">45</span>
<span class="line-number" id="l-46">46</span>
<span class="line-number" id="l-47">47</span>
<span class="line-number" id="l-48">48</span>
<span class="line-number" id="l-49">49</span>
<span class="line-number" id="l-50">50</span>
<span class="line-number" id="l-51">51</span>
<span class="line-number" id="l-52">52</span>
<span class="line-number" id="l-53">53</span>
<span class="line-number" id="l-54">54</span>
<span class="line-number" id="l-55">55</span>
<span class="line-number" id="l-56">56</span>
<span class="line-number" id="l-57">57</span>
<span class="line-number" id="l-58">58</span>
<span class="line-number" id="l-59">59</span>
<span class="line-number" id="l-60">60</span>
<span class="line-number" id="l-61">61</span>
<span class="line-number" id="l-62">62</span>
<span class="line-number" id="l-63">63</span>
<span class="line-number" id="l-64">64</span>
<span class="line-number" id="l-65">65</span>
<span class="line-number" id="l-66">66</span>
<span class="line-number" id="l-67">67</span>
<span class="line-number" id="l-68">68</span>
<span class="line-number" id="l-69">69</span>
<span class="line-number" id="l-70">70</span>
<span class="line-number" id="l-71">71</span>
<span class="line-number" id="l-72">72</span>
<span class="line-number" id="l-73">73</span>
<span class="line-number" id="l-74">74</span>
<span class="line-number" id="l-75">75</span>
<span class="line-number" id="l-76">76</span>
<span class="line-number" id="l-77">77</span>
<span class="line-number" id="l-78">78</span>
<span class="line-number" id="l-79">79</span>
<span class="line-number" id="l-80">80</span>
<span class="line-number" id="l-81">81</span>
<span class="line-number" id="l-82">82</span>
<span class="line-number" id="l-83">83</span>
<span class="line-number" id="l-84">84</span>
<span class="line-number" id="l-85">85</span>
<span class="line-number" id="l-86">86</span>
<span class="line-number" id="l-87">87</span>
<span class="line-number" id="l-88">88</span>
<span class="line-number" id="l-89">89</span>
<span class="line-number" id="l-90">90</span>
<span class="line-number" id="l-91">91</span>
<span class="line-number" id="l-92">92</span>
<span class="line-number" id="l-93">93</span>
<span class="line-number" id="l-94">94</span>
<span class="line-number" id="l-95">95</span>
<span class="line-number" id="l-96">96</span>
<span class="line-number" id="l-97">97</span>
<span class="line-number" id="l-98">98</span>
<span class="line-number" id="l-99">99</span>
<span class="line-number" id="l-100">100</span>
<span class="line-number" id="l-101">101</span>
<span class="line-number" id="l-102">102</span>
<span class="line-number" id="l-103">103</span>
<span class="line-number" id="l-104">104</span>
<span class="line-number" id="l-105">105</span>
<span class="line-number" id="l-106">106</span>
<span class="line-number" id="l-107">107</span>
<span class="line-number" id="l-108">108</span>
<span class="line-number" id="l-109">109</span>
<span class="line-number" id="l-110">110</span>
<span class="line-number" id="l-111">111</span>
<span class="line-number" id="l-112">112</span>
<span class="line-number" id="l-113">113</span>
<span class="line-number" id="l-114">114</span>
<span class="line-number" id="l-115">115</span>
<span class="line-number" id="l-116">116</span>
<span class="line-number" id="l-117">117</span>
<span class="line-number" id="l-118">118</span>
<span class="line-number" id="l-119">119</span>
<span class="line-number" id="l-120">120</span>
<span class="line-number" id="l-121">121</span>
<span class="line-number" id="l-122">122</span>
<span class="line-number" id="l-123">123</span>
<span class="line-number" id="l-124">124</span>
<span class="line-number" id="l-125">125</span>
<span class="line-number" id="l-126">126</span>
<span class="line-number" id="l-127">127</span>
<span class="line-number" id="l-128">128</span>
<span class="line-number" id="l-129">129</span>
<span class="line-number" id="l-130">130</span>
<span class="line-number" id="l-131">131</span>
<span class="line-number" id="l-132">132</span>
<span class="line-number" id="l-133">133</span>
<span class="line-number" id="l-134">134</span>
<span class="line-number" id="l-135">135</span>
<span class="line-number" id="l-136">136</span>
<span class="line-number" id="l-137">137</span>
<span class="line-number" id="l-138">138</span>
<span class="line-number" id="l-139">139</span>
<span class="line-number" id="l-140">140</span>
<span class="line-number" id="l-141">141</span>
<span class="line-number" id="l-142">142</span>
<span class="line-number" id="l-143">143</span>
<span class="line-number" id="l-144">144</span>
<span class="line-number" id="l-145">145</span>
<span class="line-number" id="l-146">146</span>
<span class="line-number" id="l-147">147</span>
<span class="line-number" id="l-148">148</span>
<span class="line-number" id="l-149">149</span>
<span class="line-number" id="l-150">150</span>
<span class="line-number" id="l-151">151</span>
<span class="line-number" id="l-152">152</span>
<span class="line-number" id="l-153">153</span>
<span class="line-number" id="l-154">154</span>
<span class="line-number" id="l-155">155</span>
<span class="line-number" id="l-156">156</span>
<span class="line-number" id="l-157">157</span>
<span class="line-number" id="l-158">158</span>
<span class="line-number" id="l-159">159</span>
<span class="line-number" id="l-160">160</span>
<span class="line-number" id="l-161">161</span>
<span class="line-number" id="l-162">162</span>
<span class="line-number" id="l-163">163</span>
<span class="line-number" id="l-164">164</span>
<span class="line-number" id="l-165">165</span>
<span class="line-number" id="l-166">166</span>
<span class="line-number" id="l-167">167</span>
<span class="line-number" id="l-168">168</span>
<span class="line-number" id="l-169">169</span>
<span class="line-number" id="l-170">170</span>
<span class="line-number" id="l-171">171</span>
<span class="line-number" id="l-172">172</span>
<span class="line-number" id="l-173">173</span>
<span class="line-number" id="l-174">174</span>
<span class="line-number" id="l-175">175</span>
<span class="line-number" id="l-176">176</span>
<span class="line-number" id="l-177">177</span>
<span class="line-number" id="l-178">178</span>
<span class="line-number" id="l-179">179</span>
<span class="line-number" id="l-180">180</span>
<span class="line-number" id="l-181">181</span>
<span class="line-number" id="l-182">182</span>
<span class="line-number" id="l-183">183</span>
<span class="line-number" id="l-184">184</span>
<span class="line-number" id="l-185">185</span>
<span class="line-number" id="l-186">186</span>
<span class="line-number" id="l-187">187</span>
<span class="line-number" id="l-188">188</span>
<span class="line-number" id="l-189">189</span>
<span class="line-number" id="l-190">190</span>
<span class="line-number" id="l-191">191</span>
<span class="line-number" id="l-192">192</span>
<span class="line-number" id="l-193">193</span>
<span class="line-number" id="l-194">194</span>
<span class="line-number" id="l-195">195</span>
<span class="line-number" id="l-196">196</span>
<span class="line-number" id="l-197">197</span>
<span class="line-number" id="l-198">198</span>
<span class="line-number" id="l-199">199</span>
<span class="line-number" id="l-200">200</span>
<span class="line-number" id="l-201">201</span>
<span class="line-number" id="l-202">202</span>
<span class="line-number" id="l-203">203</span>
<span class="line-number" id="l-204">204</span>
<span class="line-number" id="l-205">205</span>
<span class="line-number" id="l-206">206</span>
<span class="line-number" id="l-207">207</span>
<span class="line-number" id="l-208">208</span>
<span class="line-number" id="l-209">209</span>
<span class="line-number" id="l-210">210</span>
<span class="line-number" id="l-211">211</span>
<span class="line-number" id="l-212">212</span>
<span class="line-number" id="l-213">213</span>
<span class="line-number" id="l-214">214</span>
<span class="line-number" id="l-215">215</span>
<span class="line-number" id="l-216">216</span>
<span class="line-number" id="l-217">217</span>
<span class="line-number" id="l-218">218</span>
<span class="line-number" id="l-219">219</span>
<span class="line-number" id="l-220">220</span>
<span class="line-number" id="l-221">221</span>
<span class="line-number" id="l-222">222</span>
<span class="line-number" id="l-223">223</span>
<span class="line-number" id="l-224">224</span>
<span class="line-number" id="l-225">225</span>
<span class="line-number" id="l-226">226</span>
<span class="line-number" id="l-227">227</span>
<span class="line-number" id="l-228">228</span>
<span class="line-number" id="l-229">229</span>
<span class="line-number" id="l-230">230</span>
<span class="line-number" id="l-231">231</span>
<span class="line-number" id="l-232">232</span>
<span class="line-number" id="l-233">233</span>
<span class="line-number" id="l-234">234</span>
<span class="line-number" id="l-235">235</span>
<span class="line-number" id="l-236">236</span>
<span class="line-number" id="l-237">237</span>
<span class="line-number" id="l-238">238</span>
<span class="line-number" id="l-239">239</span>
<span class="line-number" id="l-240">240</span>
<span class="line-number" id="l-241">241</span>
<span class="line-number" id="l-242">242</span>
<span class="line-number" id="l-243">243</span>
<span class="line-number" id="l-244">244</span>
<span class="line-number" id="l-245">245</span>
<span class="line-number" id="l-246">246</span>
<span class="line-number" id="l-247">247</span>
<span class="line-number" id="l-248">248</span>
<span class="line-number" id="l-249">249</span>
<span class="line-number" id="l-250">250</span>
<span class="line-number" id="l-251">251</span>
<span class="line-number" id="l-252">252</span>
<span class="line-number" id="l-253">253</span>
<span class="line-number" id="l-254">254</span>
<span class="line-number" id="l-255">255</span>
<span class="line-number" id="l-256">256</span>
<span class="line-number" id="l-257">257</span>
<span class="line-number" id="l-258">258</span>
<span class="line-number" id="l-259">259</span>
<span class="line-number" id="l-260">260</span>
<span class="line-number" id="l-261">261</span>
<span class="line-number" id="l-262">262</span>
<span class="line-number" id="l-263">263</span>
<span class="line-number" id="l-264">264</span>
<span class="line-number" id="l-265">265</span>
<span class="line-number" id="l-266">266</span>
<span class="line-number" id="l-267">267</span>
<span class="line-number" id="l-268">268</span>
<span class="line-number" id="l-269">269</span>
<span class="line-number" id="l-270">270</span>
<span class="line-number" id="l-271">271</span>
<span class="line-number" id="l-272">272</span>
<span class="line-number" id="l-273">273</span>
<span class="line-number" id="l-274">274</span>
<span class="line-number" id="l-275">275</span>
<span class="line-number" id="l-276">276</span>
<span class="line-number" id="l-277">277</span>
<span class="line-number" id="l-278">278</span>
<span class="line-number" id="l-279">279</span>
<span class="line-number" id="l-280">280</span>
<span class="line-number" id="l-281">281</span>
<span class="line-number" id="l-282">282</span>
<span class="line-number" id="l-283">283</span>
<span class="line-number" id="l-284">284</span>
<span class="line-number" id="l-285">285</span>
<span class="line-number" id="l-286">286</span>
<span class="line-number" id="l-287">287</span>
<span class="line-number" id="l-288">288</span>
<span class="line-number" id="l-289">289</span>
<span class="line-number" id="l-290">290</span>
<span class="line-number" id="l-291">291</span>
<span class="line-number" id="l-292">292</span>
<span class="line-number" id="l-293">293</span>
<span class="line-number" id="l-294">294</span>
<span class="line-number" id="l-295">295</span>
<span class="line-number" id="l-296">296</span>
<span class="line-number" id="l-297">297</span>
<span class="line-number" id="l-298">298</span>
<span class="line-number" id="l-299">299</span>
<span class="line-number" id="l-300">300</span>
<span class="line-number" id="l-301">301</span>
<span class="line-number" id="l-302">302</span>
<span class="line-number" id="l-303">303</span>
<span class="line-number" id="l-304">304</span>
<span class="line-number" id="l-305">305</span>
<span class="line-number" id="l-306">306</span>
<span class="line-number" id="l-307">307</span>
<span class="line-number" id="l-308">308</span>
<span class="line-number" id="l-309">309</span>
<span class="line-number" id="l-310">310</span>
<span class="line-number" id="l-311">311</span>
<span class="line-number" id="l-312">312</span>
<span class="line-number" id="l-313">313</span>
<span class="line-number" id="l-314">314</span>
<span class="line-number" id="l-315">315</span>
<span class="line-number" id="l-316">316</span>
<span class="line-number" id="l-317">317</span>
<span class="line-number" id="l-318">318</span>
<span class="line-number" id="l-319">319</span>
<span class="line-number" id="l-320">320</span>
<span class="line-number" id="l-321">321</span>
<span class="line-number" id="l-322">322</span>
<span class="line-number" id="l-323">323</span>
<span class="line-number" id="l-324">324</span>
<span class="line-number" id="l-325">325</span>
<span class="line-number" id="l-326">326</span>
<span class="line-number" id="l-327">327</span>
<span class="line-number" id="l-328">328</span>
<span class="line-number" id="l-329">329</span>
<span class="line-number" id="l-330">330</span>
<span class="line-number" id="l-331">331</span>
<span class="line-number" id="l-332">332</span>
<span class="line-number" id="l-333">333</span>
<span class="line-number" id="l-334">334</span>
<span class="line-number" id="l-335">335</span>
<span class="line-number" id="l-336">336</span>
<span class="line-number" id="l-337">337</span>
<span class="line-number" id="l-338">338</span>
<span class="line-number" id="l-339">339</span>
<span class="line-number" id="l-340">340</span>
<span class="line-number" id="l-341">341</span>
<span class="line-number" id="l-342">342</span>
<span class="line-number" id="l-343">343</span>
<span class="line-number" id="l-344">344</span>
<span class="line-number" id="l-345">345</span>
<span class="line-number" id="l-346">346</span>
<span class="line-number" id="l-347">347</span>
<span class="line-number" id="l-348">348</span>
<span class="line-number" id="l-349">349</span>
<span class="line-number" id="l-350">350</span>
<span class="line-number" id="l-351">351</span>
<span class="line-number" id="l-352">352</span>
<span class="line-number" id="l-353">353</span>
<span class="line-number" id="l-354">354</span>
<span class="line-number" id="l-355">355</span>
<span class="line-number" id="l-356">356</span>
<span class="line-number" id="l-357">357</span>
<span class="line-number" id="l-358">358</span>
<span class="line-number" id="l-359">359</span>
<span class="line-number" id="l-360">360</span>
<span class="line-number" id="l-361">361</span>
<span class="line-number" id="l-362">362</span>
<span class="line-number" id="l-363">363</span>
<span class="line-number" id="l-364">364</span>
<span class="line-number" id="l-365">365</span>
<span class="line-number" id="l-366">366</span>
<span class="line-number" id="l-367">367</span>
<span class="line-number" id="l-368">368</span>
<span class="line-number" id="l-369">369</span>
<span class="line-number" id="l-370">370</span>
<span class="line-number" id="l-371">371</span>
<span class="line-number" id="l-372">372</span>
<span class="line-number" id="l-373">373</span>
<span class="line-number" id="l-374">374</span>
<span class="line-number" id="l-375">375</span>
<span class="line-number" id="l-376">376</span>
<span class="line-number" id="l-377">377</span>
<span class="line-number" id="l-378">378</span>
<span class="line-number" id="l-379">379</span>
<span class="line-number" id="l-380">380</span>
<span class="line-number" id="l-381">381</span>
<span class="line-number" id="l-382">382</span>
<span class="line-number" id="l-383">383</span>
<span class="line-number" id="l-384">384</span>
<span class="line-number" id="l-385">385</span>
<span class="line-number" id="l-386">386</span>
<span class="line-number" id="l-387">387</span>
<span class="line-number" id="l-388">388</span>
<span class="line-number" id="l-389">389</span>
<span class="line-number" id="l-390">390</span>
<span class="line-number" id="l-391">391</span>
<span class="line-number" id="l-392">392</span>
<span class="line-number" id="l-393">393</span>
<span class="line-number" id="l-394">394</span>
<span class="line-number" id="l-395">395</span>
<span class="line-number" id="l-396">396</span>
<span class="line-number" id="l-397">397</span>
<span class="line-number" id="l-398">398</span>
<span class="line-number" id="l-399">399</span>
<span class="line-number" id="l-400">400</span>
<span class="line-number" id="l-401">401</span>
<span class="line-number" id="l-402">402</span>
<span class="line-number" id="l-403">403</span>
<span class="line-number" id="l-404">404</span>
<span class="line-number" id="l-405">405</span>
<span class="line-number" id="l-406">406</span>
<span class="line-number" id="l-407">407</span>
<span class="line-number" id="l-408">408</span>
<span class="line-number" id="l-409">409</span>
<span class="line-number" id="l-410">410</span>
<span class="line-number" id="l-411">411</span>
<span class="line-number" id="l-412">412</span>
<span class="line-number" id="l-413">413</span>
<span class="line-number" id="l-414">414</span>
<span class="line-number" id="l-415">415</span>
<span class="line-number" id="l-416">416</span>
<span class="line-number" id="l-417">417</span>
<span class="line-number" id="l-418">418</span>
<span class="line-number" id="l-419">419</span>
<span class="line-number" id="l-420">420</span>
<span class="line-number" id="l-421">421</span>
<span class="line-number" id="l-422">422</span>
<span class="line-number" id="l-423">423</span>
<span class="line-number" id="l-424">424</span>
<span class="line-number" id="l-425">425</span>
<span class="line-number" id="l-426">426</span>
<span class="line-number" id="l-427">427</span>
<span class="line-number" id="l-428">428</span>
<span class="line-number" id="l-429">429</span>
<span class="line-number" id="l-430">430</span>
<span class="line-number" id="l-431">431</span>
<span class="line-number" id="l-432">432</span>
<span class="line-number" id="l-433">433</span>
<span class="line-number" id="l-434">434</span>
<span class="line-number" id="l-435">435</span>
<span class="line-number" id="l-436">436</span>
<span class="line-number" id="l-437">437</span>
<span class="line-number" id="l-438">438</span>
<span class="line-number" id="l-439">439</span>
<span class="line-number" id="l-440">440</span>
<span class="line-number" id="l-441">441</span>
<span class="line-number" id="l-442">442</span>
<span class="line-number" id="l-443">443</span>
<span class="line-number" id="l-444">444</span>
<span class="line-number" id="l-445">445</span>
<span class="line-number" id="l-446">446</span>
<span class="line-number" id="l-447">447</span>
<span class="line-number" id="l-448">448</span>
<span class="line-number" id="l-449">449</span>
<span class="line-number" id="l-450">450</span>
<span class="line-number" id="l-451">451</span>
<span class="line-number" id="l-452">452</span>
<span class="line-number" id="l-453">453</span>
<span class="line-number" id="l-454">454</span>
<span class="line-number" id="l-455">455</span>
<span class="line-number" id="l-456">456</span>
<span class="line-number" id="l-457">457</span>
<span class="line-number" id="l-458">458</span>
<span class="line-number" id="l-459">459</span>
<span class="line-number" id="l-460">460</span>
<span class="line-number" id="l-461">461</span>
<span class="line-number" id="l-462">462</span>
<span class="line-number" id="l-463">463</span>
<span class="line-number" id="l-464">464</span>
<span class="line-number" id="l-465">465</span>
<span class="line-number" id="l-466">466</span>
<span class="line-number" id="l-467">467</span>
<span class="line-number" id="l-468">468</span>
<span class="line-number" id="l-469">469</span>
<span class="line-number" id="l-470">470</span>
<span class="line-number" id="l-471">471</span>
<span class="line-number" id="l-472">472</span>
<span class="line-number" id="l-473">473</span>
<span class="line-number" id="l-474">474</span>
<span class="line-number" id="l-475">475</span>
<span class="line-number" id="l-476">476</span>
<span class="line-number" id="l-477">477</span>
<span class="line-number" id="l-478">478</span>
<span class="line-number" id="l-479">479</span>
<span class="line-number" id="l-480">480</span>
<span class="line-number" id="l-481">481</span>
<span class="line-number" id="l-482">482</span>
<span class="line-number" id="l-483">483</span>
<span class="line-number" id="l-484">484</span>
<span class="line-number" id="l-485">485</span>
<span class="line-number" id="l-486">486</span>
<span class="line-number" id="l-487">487</span>
<span class="line-number" id="l-488">488</span>
<span class="line-number" id="l-489">489</span>
<span class="line-number" id="l-490">490</span>
<span class="line-number" id="l-491">491</span>
<span class="line-number" id="l-492">492</span>
<span class="line-number" id="l-493">493</span>
<span class="line-number" id="l-494">494</span>
<span class="line-number" id="l-495">495</span>
<span class="line-number" id="l-496">496</span>
<span class="line-number" id="l-497">497</span>
<span class="line-number" id="l-498">498</span>
<span class="line-number" id="l-499">499</span>
<span class="line-number" id="l-500">500</span>
<span class="line-number" id="l-501">501</span>
<span class="line-number" id="l-502">502</span>
<span class="line-number" id="l-503">503</span>
<span class="line-number" id="l-504">504</span>
<span class="line-number" id="l-505">505</span>
<span class="line-number" id="l-506">506</span>
<span class="line-number" id="l-507">507</span>
<span class="line-number" id="l-508">508</span>
<span class="line-number" id="l-509">509</span>
<span class="line-number" id="l-510">510</span>
<span class="line-number" id="l-511">511</span>
<span class="line-number" id="l-512">512</span>
<span class="line-number" id="l-513">513</span>
<span class="line-number" id="l-514">514</span>
<span class="line-number" id="l-515">515</span>
<span class="line-number" id="l-516">516</span>
<span class="line-number" id="l-517">517</span>
<span class="line-number" id="l-518">518</span>
<span class="line-number" id="l-519">519</span>
<span class="line-number" id="l-520">520</span>
<span class="line-number" id="l-521">521</span>
<span class="line-number" id="l-522">522</span>
<span class="line-number" id="l-523">523</span>
<span class="line-number" id="l-524">524</span>
<span class="line-number" id="l-525">525</span>
<span class="line-number" id="l-526">526</span>
<span class="line-number" id="l-527">527</span>
<span class="line-number" id="l-528">528</span>
<span class="line-number" id="l-529">529</span>
<span class="line-number" id="l-530">530</span>
<span class="line-number" id="l-531">531</span>
<span class="line-number" id="l-532">532</span>
<span class="line-number" id="l-533">533</span>
<span class="line-number" id="l-534">534</span>
<span class="line-number" id="l-535">535</span>
<span class="line-number" id="l-536">536</span>
<span class="line-number" id="l-537">537</span>
<span class="line-number" id="l-538">538</span>
<span class="line-number" id="l-539">539</span>
<span class="line-number" id="l-540">540</span>
<span class="line-number" id="l-541">541</span>
<span class="line-number" id="l-542">542</span>
<span class="line-number" id="l-543">543</span>
<span class="line-number" id="l-544">544</span>
<span class="line-number" id="l-545">545</span>
<span class="line-number" id="l-546">546</span>
<span class="line-number" id="l-547">547</span>
<span class="line-number" id="l-548">548</span>
<span class="line-number" id="l-549">549</span>
<span class="line-number" id="l-550">550</span>
<span class="line-number" id="l-551">551</span>
<span class="line-number" id="l-552">552</span>
<span class="line-number" id="l-553">553</span>
<span class="line-number" id="l-554">554</span>
<span class="line-number" id="l-555">555</span>
<span class="line-number" id="l-556">556</span>
<span class="line-number" id="l-557">557</span>
<span class="line-number" id="l-558">558</span>
<span class="line-number" id="l-559">559</span>
<span class="line-number" id="l-560">560</span>
<span class="line-number" id="l-561">561</span>
<span class="line-number" id="l-562">562</span>
<span class="line-number" id="l-563">563</span>
<span class="line-number" id="l-564">564</span>
<span class="line-number" id="l-565">565</span>
<span class="line-number" id="l-566">566</span>
<span class="line-number" id="l-567">567</span>
<span class="line-number" id="l-568">568</span>
<span class="line-number" id="l-569">569</span>
<span class="line-number" id="l-570">570</span>
<span class="line-number" id="l-571">571</span>
<span class="line-number" id="l-572">572</span>
<span class="line-number" id="l-573">573</span>
<span class="line-number" id="l-574">574</span>
<span class="line-number" id="l-575">575</span>
<span class="line-number" id="l-576">576</span>
<span class="line-number" id="l-577">577</span>
<span class="line-number" id="l-578">578</span>
<span class="line-number" id="l-579">579</span>
<span class="line-number" id="l-580">580</span>
<span class="line-number" id="l-581">581</span>
<span class="line-number" id="l-582">582</span>
<span class="line-number" id="l-583">583</span>
<span class="line-number" id="l-584">584</span>
<span class="line-number" id="l-585">585</span>
<span class="line-number" id="l-586">586</span>
<span class="line-number" id="l-587">587</span>
<span class="line-number" id="l-588">588</span>
<span class="line-number" id="l-589">589</span>
<span class="line-number" id="l-590">590</span>
<span class="line-number" id="l-591">591</span>
<span class="line-number" id="l-592">592</span>
<span class="line-number" id="l-593">593</span>
<span class="line-number" id="l-594">594</span>
<span class="line-number" id="l-595">595</span>
<span class="line-number" id="l-596">596</span>
<span class="line-number" id="l-597">597</span>
<span class="line-number" id="l-598">598</span>
<span class="line-number" id="l-599">599</span>
<span class="line-number" id="l-600">600</span>
<span class="line-number" id="l-601">601</span>
<span class="line-number" id="l-602">602</span>
<span class="line-number" id="l-603">603</span>
<span class="line-number" id="l-604">604</span>
<span class="line-number" id="l-605">605</span>
<span class="line-number" id="l-606">606</span>
<span class="line-number" id="l-607">607</span>
<span class="line-number" id="l-608">608</span>
<span class="line-number" id="l-609">609</span>
<span class="line-number" id="l-610">610</span>
<span class="line-number" id="l-611">611</span>
<span class="line-number" id="l-612">612</span>
<span class="line-number" id="l-613">613</span>
<span class="line-number" id="l-614">614</span>
<span class="line-number" id="l-615">615</span>
<span class="line-number" id="l-616">616</span>
<span class="line-number" id="l-617">617</span>
<span class="line-number" id="l-618">618</span>
<span class="line-number" id="l-619">619</span>
<span class="line-number" id="l-620">620</span>
<span class="line-number" id="l-621">621</span>
<span class="line-number" id="l-622">622</span>
<span class="line-number" id="l-623">623</span>
<span class="line-number" id="l-624">624</span>
<span class="line-number" id="l-625">625</span>
<span class="line-number" id="l-626">626</span>
<span class="line-number" id="l-627">627</span>
<span class="line-number" id="l-628">628</span>
<span class="line-number" id="l-629">629</span>
<span class="line-number" id="l-630">630</span>
<span class="line-number" id="l-631">631</span>
<span class="line-number" id="l-632">632</span>
<span class="line-number" id="l-633">633</span>
<span class="line-number" id="l-634">634</span>
<span class="line-number" id="l-635">635</span>
<span class="line-number" id="l-636">636</span>
<span class="line-number" id="l-637">637</span>
<span class="line-number" id="l-638">638</span>
<span class="line-number" id="l-639">639</span>
<span class="line-number" id="l-640">640</span>
<span class="line-number" id="l-641">641</span>
<span class="line-number" id="l-642">642</span>
<span class="line-number" id="l-643">643</span>
<span class="line-number" id="l-644">644</span>
<span class="line-number" id="l-645">645</span>
<span class="line-number" id="l-646">646</span>
<span class="line-number" id="l-647">647</span>
<span class="line-number" id="l-648">648</span>
<span class="line-number" id="l-649">649</span>
<span class="line-number" id="l-650">650</span>
<span class="line-number" id="l-651">651</span>
<span class="line-number" id="l-652">652</span>
<span class="line-number" id="l-653">653</span>
<span class="line-number" id="l-654">654</span>
<span class="line-number" id="l-655">655</span>
<span class="line-number" id="l-656">656</span>
<span class="line-number" id="l-657">657</span>
<span class="line-number" id="l-658">658</span>
<span class="line-number" id="l-659">659</span>
<span class="line-number" id="l-660">660</span>
<span class="line-number" id="l-661">661</span>
<span class="line-number" id="l-662">662</span>
<span class="line-number" id="l-663">663</span>
<span class="line-number" id="l-664">664</span>
<span class="line-number" id="l-665">665</span>
<span class="line-number" id="l-666">666</span>
<span class="line-number" id="l-667">667</span>
<span class="line-number" id="l-668">668</span>
<span class="line-number" id="l-669">669</span>
<span class="line-number" id="l-670">670</span>
<span class="line-number" id="l-671">671</span>
<span class="line-number" id="l-672">672</span>
<span class="line-number" id="l-673">673</span>
<span class="line-number" id="l-674">674</span>
<span class="line-number" id="l-675">675</span>
<span class="line-number" id="l-676">676</span>
<span class="line-number" id="l-677">677</span>
<span class="line-number" id="l-678">678</span>
<span class="line-number" id="l-679">679</span>
<span class="line-number" id="l-680">680</span>
<span class="line-number" id="l-681">681</span>
<span class="line-number" id="l-682">682</span>
<span class="line-number" id="l-683">683</span>
<span class="line-number" id="l-684">684</span>
<span class="line-number" id="l-685">685</span>
<span class="line-number" id="l-686">686</span>
<span class="line-number" id="l-687">687</span>
<span class="line-number" id="l-688">688</span>
<span class="line-number" id="l-689">689</span>
<span class="line-number" id="l-690">690</span>
<span class="line-number" id="l-691">691</span>
<span class="line-number" id="l-692">692</span>
<span class="line-number" id="l-693">693</span>
<span class="line-number" id="l-694">694</span>
<span class="line-number" id="l-695">695</span>
<span class="line-number" id="l-696">696</span>
<span class="line-number" id="l-697">697</span>
<span class="line-number" id="l-698">698</span>
<span class="line-number" id="l-699">699</span>
<span class="line-number" id="l-700">700</span>
<span class="line-number" id="l-701">701</span>
<span class="line-number" id="l-702">702</span>
<span class="line-number" id="l-703">703</span>
<span class="line-number" id="l-704">704</span>
<span class="line-number" id="l-705">705</span>
<span class="line-number" id="l-706">706</span>
<span class="line-number" id="l-707">707</span>
<span class="line-number" id="l-708">708</span>
<span class="line-number" id="l-709">709</span>
<span class="line-number" id="l-710">710</span>
<span class="line-number" id="l-711">711</span>
<span class="line-number" id="l-712">712</span>
<span class="line-number" id="l-713">713</span>
<span class="line-number" id="l-714">714</span>
<span class="line-number" id="l-715">715</span>
<span class="line-number" id="l-716">716</span>
<span class="line-number" id="l-717">717</span>
<span class="line-number" id="l-718">718</span>
<span class="line-number" id="l-719">719</span>
<span class="line-number" id="l-720">720</span>
<span class="line-number" id="l-721">721</span>
<span class="line-number" id="l-722">722</span>
<span class="line-number" id="l-723">723</span>
<span class="line-number" id="l-724">724</span>
<span class="line-number" id="l-725">725</span>
<span class="line-number" id="l-726">726</span>
<span class="line-number" id="l-727">727</span>
<span class="line-number" id="l-728">728</span>
<span class="line-number" id="l-729">729</span>
<span class="line-number" id="l-730">730</span>
<span class="line-number" id="l-731">731</span>
<span class="line-number" id="l-732">732</span>
<span class="line-number" id="l-733">733</span>
<span class="line-number" id="l-734">734</span>
<span class="line-number" id="l-735">735</span>
<span class="line-number" id="l-736">736</span>
<span class="line-number" id="l-737">737</span>
<span class="line-number" id="l-738">738</span>
<span class="line-number" id="l-739">739</span>
<span class="line-number" id="l-740">740</span>
<span class="line-number" id="l-741">741</span>
<span class="line-number" id="l-742">742</span>
<span class="line-number" id="l-743">743</span>
<span class="line-number" id="l-744">744</span>
<span class="line-number" id="l-745">745</span>
<span class="line-number" id="l-746">746</span>
<span class="line-number" id="l-747">747</span>
<span class="line-number" id="l-748">748</span>
<span class="line-number" id="l-749">749</span>
<span class="line-number" id="l-750">750</span>
<span class="line-number" id="l-751">751</span>
<span class="line-number" id="l-752">752</span>
<span class="line-number" id="l-753">753</span>
<span class="line-number" id="l-754">754</span>
<span class="line-number" id="l-755">755</span>
<span class="line-number" id="l-756">756</span>
<span class="line-number" id="l-757">757</span>
<span class="line-number" id="l-758">758</span>
<span class="line-number" id="l-759">759</span>
<span class="line-number" id="l-760">760</span>
<span class="line-number" id="l-761">761</span>
<span class="line-number" id="l-762">762</span>
<span class="line-number" id="l-763">763</span>
<span class="line-number" id="l-764">764</span>
<span class="line-number" id="l-765">765</span>
<span class="line-number" id="l-766">766</span>
<span class="line-number" id="l-767">767</span>
<span class="line-number" id="l-768">768</span>
<span class="line-number" id="l-769">769</span>
<span class="line-number" id="l-770">770</span>
<span class="line-number" id="l-771">771</span>
<span class="line-number" id="l-772">772</span>
<span class="line-number" id="l-773">773</span>
<span class="line-number" id="l-774">774</span>
<span class="line-number" id="l-775">775</span>
<span class="line-number" id="l-776">776</span>
<span class="line-number" id="l-777">777</span>
<span class="line-number" id="l-778">778</span>
<span class="line-number" id="l-779">779</span>
<span class="line-number" id="l-780">780</span>
<span class="line-number" id="l-781">781</span>
<span class="line-number" id="l-782">782</span>
<span class="line-number" id="l-783">783</span>
<span class="line-number" id="l-784">784</span>
<span class="line-number" id="l-785">785</span>
<span class="line-number" id="l-786">786</span>
<span class="line-number" id="l-787">787</span>
<span class="line-number" id="l-788">788</span>
<span class="line-number" id="l-789">789</span>
<span class="line-number" id="l-790">790</span>
<span class="line-number" id="l-791">791</span>
<span class="line-number" id="l-792">792</span>
<span class="line-number" id="l-793">793</span>
<span class="line-number" id="l-794">794</span>
<span class="line-number" id="l-795">795</span>
<span class="line-number" id="l-796">796</span>
<span class="line-number" id="l-797">797</span>
<span class="line-number" id="l-798">798</span>
<span class="line-number" id="l-799">799</span>
<span class="line-number" id="l-800">800</span>
<span class="line-number" id="l-801">801</span>
<span class="line-number" id="l-802">802</span>
<span class="line-number" id="l-803">803</span>
<span class="line-number" id="l-804">804</span>
<span class="line-number" id="l-805">805</span>
<span class="line-number" id="l-806">806</span>
<span class="line-number" id="l-807">807</span>
<span class="line-number" id="l-808">808</span>
<span class="line-number" id="l-809">809</span>
<span class="line-number" id="l-810">810</span>
<span class="line-number" id="l-811">811</span>
<span class="line-number" id="l-812">812</span>
<span class="line-number" id="l-813">813</span>
<span class="line-number" id="l-814">814</span>
<span class="line-number" id="l-815">815</span>
<span class="line-number" id="l-816">816</span>
<span class="line-number" id="l-817">817</span>
<span class="line-number" id="l-818">818</span>
<span class="line-number" id="l-819">819</span>
<span class="line-number" id="l-820">820</span>
<span class="line-number" id="l-821">821</span>
<span class="line-number" id="l-822">822</span>
<span class="line-number" id="l-823">823</span>
<span class="line-number" id="l-824">824</span>
<span class="line-number" id="l-825">825</span>
<span class="line-number" id="l-826">826</span>
<span class="line-number" id="l-827">827</span>
<span class="line-number" id="l-828">828</span>
<span class="line-number" id="l-829">829</span>
<span class="line-number" id="l-830">830</span>
<span class="line-number" id="l-831">831</span>
<span class="line-number" id="l-832">832</span>
<span class="line-number" id="l-833">833</span>
<span class="line-number" id="l-834">834</span>
<span class="line-number" id="l-835">835</span>
<span class="line-number" id="l-836">836</span>
<span class="line-number" id="l-837">837</span>
<span class="line-number" id="l-838">838</span>
<span class="line-number" id="l-839">839</span>
<span class="line-number" id="l-840">840</span>
<span class="line-number" id="l-841">841</span>
<span class="line-number" id="l-842">842</span>
<span class="line-number" id="l-843">843</span>
<span class="line-number" id="l-844">844</span>
<span class="line-number" id="l-845">845</span>
<span class="line-number" id="l-846">846</span>
<span class="line-number" id="l-847">847</span>
<span class="line-number" id="l-848">848</span>
<span class="line-number" id="l-849">849</span>
<span class="line-number" id="l-850">850</span>
<span class="line-number" id="l-851">851</span>
<span class="line-number" id="l-852">852</span>
<span class="line-number" id="l-853">853</span>
<span class="line-number" id="l-854">854</span>
<span class="line-number" id="l-855">855</span>
<span class="line-number" id="l-856">856</span>
<span class="line-number" id="l-857">857</span>
<span class="line-number" id="l-858">858</span>
<span class="line-number" id="l-859">859</span>
<span class="line-number" id="l-860">860</span>
<span class="line-number" id="l-861">861</span>
<span class="line-number" id="l-862">862</span>
<span class="line-number" id="l-863">863</span>
<span class="line-number" id="l-864">864</span>
<span class="line-number" id="l-865">865</span>
<span class="line-number" id="l-866">866</span>
<span class="line-number" id="l-867">867</span>
<span class="line-number" id="l-868">868</span>
<span class="line-number" id="l-869">869</span>
<span class="line-number" id="l-870">870</span>
<span class="line-number" id="l-871">871</span>
<span class="line-number" id="l-872">872</span>
<span class="line-number" id="l-873">873</span>
<span class="line-number" id="l-874">874</span>
<span class="line-number" id="l-875">875</span>
<span class="line-number" id="l-876">876</span>
<span class="line-number" id="l-877">877</span>
<span class="line-number" id="l-878">878</span>
<span class="line-number" id="l-879">879</span>
<span class="line-number" id="l-880">880</span>
<span class="line-number" id="l-881">881</span>
<span class="line-number" id="l-882">882</span>
<span class="line-number" id="l-883">883</span>
<span class="line-number" id="l-884">884</span>
<span class="line-number" id="l-885">885</span>
<span class="line-number" id="l-886">886</span>
<span class="line-number" id="l-887">887</span>
<span class="line-number" id="l-888">888</span>
<span class="line-number" id="l-889">889</span>
<span class="line-number" id="l-890">890</span>
<span class="line-number" id="l-891">891</span>
<span class="line-number" id="l-892">892</span>
<span class="line-number" id="l-893">893</span>
<span class="line-number" id="l-894">894</span>
<span class="line-number" id="l-895">895</span>
<span class="line-number" id="l-896">896</span>
<span class="line-number" id="l-897">897</span>
<span class="line-number" id="l-898">898</span>
<span class="line-number" id="l-899">899</span>
<span class="line-number" id="l-900">900</span>
<span class="line-number" id="l-901">901</span>
<span class="line-number" id="l-902">902</span>
<span class="line-number" id="l-903">903</span>
<span class="line-number" id="l-904">904</span>
<span class="line-number" id="l-905">905</span>
<span class="line-number" id="l-906">906</span>
<span class="line-number" id="l-907">907</span>
<span class="line-number" id="l-908">908</span>
<span class="line-number" id="l-909">909</span>
<span class="line-number" id="l-910">910</span>
<span class="line-number" id="l-911">911</span>
</pre>
<pre id="src" class="highlight highlightjs">
<code class="language-golo" data-lang="golo"># ............................................................................................... #
#
# Copyright (c) 2012-2018 Institut National des Sciences AppliquÃ©es de Lyon (INSA Lyon) and others
#
# This program and the accompanying materials are made available under the
# terms of the Eclipse Public License 2.0 which is available at
# http://www.eclipse.org/legal/epl-2.0.
#
# SPDX-License-Identifier: EPL-2.0
#
# ............................................................................................... #
----
This module defines the set of standard augmentations.
----
module gololang.StandardAugmentations


local function _newWithSameType = |this| {
  try {
    return this: getClass(): newInstance()
  } catch (e) {
    if not(e oftype java.lang.InstantiationException.class) {
      throw e
    }
    let fallback = match {
      when this oftype java.util.RandomAccess.class then java.util.ArrayList()
      when this oftype java.util.List.class then java.util.LinkedList()
      when this oftype java.util.Set.class then java.util.HashSet()
      when this oftype java.util.Map.class then java.util.HashMap()
      otherwise null
    }
    if fallback is null {
      raise("Cannot create a new collection from " + this: getClass())
    }
    return fallback
  }
}

local function _closureWithIndexArgument = |target| -> match {
  when target: arity() == 0
    then FunctionReference(java.lang.invoke.MethodHandles.dropArguments(target: handle(), 0, java.lang.Object.class))
  otherwise
    target
}

local function _join = |this, separator| {
  let size = this: size()
  case {
    when size == 0 {
      return ""
    }
    when size == 1 {
      return this: get(0): toString()
    }
    otherwise {
      let buffer = java.lang.StringBuilder(this: get(0): toString())
      for (var i = 1, i < size, i = i + 1) {
        buffer: append(separator): append(this: get(i): toString())
      }
      return buffer: toString()
    }
  }
}

# ............................................................................................... #

----
Number augmentations.
----
augment java.lang.Number {

  ----
  Repeats a function many times, as in:

      3: times(-> println("Hey!")
      4: times(|i| -> println(i))

  * `count`: how many times the `func` function must be repeated.
  * `func`: a function to execute.

  The `func` function may take 0 or 1 argument. In the later case the argument is the iteration
  count index.
  ----
  function times = |count, func| {
    let target = _closureWithIndexArgument(func)
    for (var i = 0, i < count, i = i + 1) {
      target(i)
    }
  }

  ----
  Repeats a function over a discrete interval:

      1: upTo(3, -> println("Hello"))
      1: upTo(3, |i| ->println(i))

  * `low`: the start value (inclusive).
  * `high`: the end value (inclusive).
  * `func`: the function to execute.

  As in the case of [`times`](#times_2), `func` may take an optional index parameter.
  See also [`downTo`](#downTo_3).
  ----
  function upTo = |low, high, func| {
    let target = _closureWithIndexArgument(func)
    for (var i = low, i <= high, i = i + 1) {
      target(i)
    }
  }

  ----
  Similar to [`upTo`](#upTo_3), except that the interval iteration is made from `high` down to `low`.
  ----
  function downTo = |high, low, func| {
    let target = _closureWithIndexArgument(func)
    for (var i = high, i >= low, i = i - 1) {
      target(i)
    }
  }
}

# ............................................................................................... #

----
Useful string augmentations.
----
augment java.lang.String {

  ----
  Convenience wrapper over `java.lang.String.format(...)`.
  ----
  function format = |this, args...| {
    if args: length() == 1 {
      return java.lang.String.format(this, args: get(0))
    } else {
      return java.lang.String.format(this, args)
    }
  }

  ----
  Wrapper over `java.lang.Integer.parseInt`.
  ----
  function toInt = |this| ->
    java.lang.Integer.parseInt(this)

   ----
  Wrapper over `java.lang.Integer.parseInt`.
  ----
  function toInteger = |this| ->
    java.lang.Integer.parseInt(this)

  ----
  Wrapper over `java.lang.Integer.parseDouble`.
  ----
  function toDouble = |this| ->
    java.lang.Double.parseDouble(this)

  ----
  Wrapper over `java.lang.Integer.parseFloat`.
  ----
  function toFloat = |this| ->
    java.lang.Float.parseFloat(this)

  ----
  Wrapper over `java.lang.Integer.parseLong`.
  ----
  function toLong = |this| ->
    java.lang.Long.parseLong(this)
}

# ............................................................................................... #
----
Augmentations over `CharSequence` to view it as a "real" `char` collection.
----
augment java.lang.CharSequence {

  ----
  Returns the first `char` of the sequence, of `null` if empty.
  ----
  function head = |this| -> match {
    when this: isEmpty() then null
    otherwise this: charAt(0)
  }

  ----
  Returns the remaining subsequence as a String (i.e. an immutable sequence)
  ----
  function tail = |this| -> match {
    when this: isEmpty() then this: getClass(): newInstance()
    otherwise this: subSequence(1, this: length()): toString()
  }

  ----
  Checks if the sequence is empty.
  ----
  function isEmpty = |this| -> this: length() == 0
}


# ............................................................................................... #

----
Augmentations over iterable collections.
----
augment java.lang.Iterable {

  ----
  General purpose reducing operation:

      let data = [1, 2, 3, 4, 5]
      println("sum = " + data: reduce(0, |acc, next| -> acc + next))

  * `this`: an iterable.
  * `initialValue`: the initial accumulator value for the reducing operation.
  * `func`: the function to apply over an accumulator and the next value.
  ----
  function reduce = |this, initialValue, func| {
    var acc = initialValue
    foreach (element in this) {
      acc = func(acc, element)
    }
    return acc
  }

  ----
  Applies a function over each element:

      [1, 2, 3]: each(|e| -> println(e))

  * `this`: an iterable.
  * `func`: the function to apply, taking the current element as a parameter.
  ----
  function each = |this, func| {
    foreach (element in this) {
      func(element)
    }
    return this
  }

  ----
  Counts the number of elements that satisfy a predicate:

      println([1, 2, 3, 4]: count(|n| -> (n % 2) == 0))

  * `this`: an iterable.
  * `pred`: a predicate function, taking an element and returning a boolean.
  ----
  function count = |this, pred| {
    var result = 0
    foreach element in this {
      if pred(element) {
        result = result + 1
      }
    }
    return result
  }

  ----
  Checks whether any element satisfied a predicate:

      println([1, 2, 3, 4]: exists(|n| -> n > 3))

  * `this`: an iterable.
  * `pred` a predicate function, taking an element and returning a boolean.
  ----
  function exists = |this, pred| {
    foreach element in this {
      if pred(element) {
        return true
      }
    }
    return false
  }
}

# ............................................................................................... #

----
Java collections augmentations.
----
augment java.util.Collection {

  ----
  Returns an empty collection of the same type as `this`.
  ----
  function newWithSameType = |this| -> _newWithSameType(this)

  ----
  Destructuration helper.

  * return a tuple of the values
  ----
  function destruct = |this| -> Tuple.fromArray(this: toArray())
}

# ............................................................................................... #

----
Java lists augmentations.
----
augment java.util.List {

  ----
  Appends an element to a list.
  ----
  function append = |this, element| {
    this: add(element)
    return this
  }

  ----
  Prepends an element to a list.
  ----
  function prepend = |this, element| {
    this: add(0, element)
    return this
  }

  ----
  Inserts an element at some index.
  ----
  function insert = |this, index, element| {
    this: add(index, element)
    return this
  }

  ----
  Appends a variable number of arguments to a list.

  * `head`: an element to append.
  * `tail`: a variable number of elements to append.
  ----
  function append = |this, head, tail...| {
    this: append(head)
    foreach (element in tail) {
      this: append(element)
    }
    return this
  }

  ----
  Prepends a variable number of arguments to a list.
  ----
  function prepend = |this, head, tail...| {
    for (var i = tail: length() - 1, i >= 0, i = i - 1) {
      this: prepend(tail: get(i))
    }
    return this: prepend(head)
  }

  ----
  Returns a list first element, of `null` if empty.
  ----
  function head = |this| -> match {
    when this: isEmpty() then null
    otherwise this: get(0)
  }

  ----
  Returns a list last element.
  ----
  function last = |this| -> this: get(this: size() - 1)

  ----
  Returns the rest of a list after its head, as an unmodifiable list.
  ----
  function tail = |this| -> match {
    when this: size() <= 1 then java.util.Collections.EMPTY_LIST()
    otherwise java.util.Collections.unmodifiableList(this: subList(1, this: size()))
  }

  ----
  Convenience wrapper over `java.util.Collections.unmodifiableList`.
  ----
  function unmodifiableView = |this| -> java.util.Collections.unmodifiableList(this)

  ----
  Finds the first element of a list matching a predicate:

      println(list[1, 2, 3, 4]: find(|n| -> n > 3))

  * `this`: a list.
  * `pred`: a predicate function taking an element and returning a boolean.

  `find` returns `null` when no element satisfies `pred`.
  ----
  function find = |this, pred| {
    foreach (element in this) {
      if pred(element) {
        return element
      }
    }
    return null
  }

  ----
  Filters elements based on a predicate:

      println(list[1, 2, 3, 4]: filter(|n| -> (n % 2) == 0))

  * `this`: a list.
  * `pred`: a predicate function taking an element and returning a boolean.

  `filter` returns a new collection of the same type as the original one, hence the original list is
  kept intact.
  ----
  function filter = |this, pred| {
    let filtered = this: newWithSameType()
    foreach (element in this) {
      if pred(element) {
        filtered: append(element)
      }
    }
    return filtered
  }

  ----
  Maps elements of a list using a function:

      println(list[1, 2, 3]: map(|n| -> n * 10))

  * `this`: a list.
  * `func`: a transformation function.

  `map` returns a new list with the same type, keeping the original list intact.
  ----
  function map = |this, func| {
    let mapped = this: newWithSameType()
    foreach (element in this) {
      mapped: append(func(element))
    }
    return mapped
  }

  ----
  Join the elements into a string:

      println(list[1, 2, 3]: join(", "))

  * `this`: a list.
  * `separator`: the element separator string.

  The returned string is `""` when the list is empty.
  ----
  function join = |this, separator| -> _join(this, separator)

  ----
  Reverse the elements of the list and returns the list.

  See also [`reversed`](#java.util.List.reversed_1).
  ----
  function reverse = |this| {
    java.util.Collections.reverse(this)
    return this
  }

  ----
  Same as [`reverse`](#java.util.List.reverse_1), but the returned list is a new one, leaving the original list order intact.
  ----
  function reversed = |this| {
    let reversedList = this: newWithSameType()
    reversedList: addAll(this)
    return reversedList: reverse()
  }

  ----
  Sorts the list elements and returns the list.
  ----
  function order = |this| {
    java.util.Collections.sort(this)
    return this
  }

  ----
  Returns a new list where the elements have been sorted.
  ----
  function ordered = |this| {
    let sortedList = this: newWithSameType()
    sortedList: addAll(this)
    return sortedList: order()
  }

  ----
  Sorts the element using a comparator, see `java.util.Collections.sort(...)`.
  ----
  function order = |this, comparator| {
    java.util.Collections.sort(this, comparator)
    return this
  }

  ----
  Returns a new list where the elements have been sorted using a comparator.
  See `java.util.Collections.sort`.
  ----
  function ordered = |this, comparator| {
    let sortedList = this: newWithSameType()
    sortedList: addAll(this)
    return sortedList: order(comparator)
  }

  ----
  Removes the element at the specified position.

  This method has the same behaviour as `java.util.List.remove(int)`, but is
  needed since for Golo everything is an `Object` and `remove` is overloaded.
  ----
  function removeAt = |this, idx| -> removeByIndex(this, idx)
}

# ............................................................................................... #

----
Augmentations over set collections.
----
augment java.util.Set {

  ----
  Alias for `add` that returns the set.
  ----
  function include = |this, element| {
    this: add(element)
    return this
  }

  ----
  Alias for `remove` that returns the set.
  ----
  function exclude = |this, element| {
    this: remove(element)
    return this
  }

  ----
  Includes a variable number of elements, and returns the set.
  ----
  function include = |this, first, rest...| {
    this: add(first)
    foreach (element in rest) {
      this: add(element)
    }
    return this
  }

  ----
  Excludes a variable number of elements, and returns the set.
  ----
  function exclude = |this, first, rest...| {
    this: remove(first)
    foreach (element in rest) {
      this: remove(element)
    }
    return this
  }

  ----
  Alias for `contains`.
  ----
  function has = |this, element| -> this: contains(element)

  ----
  Alias for `contains` over a variable number of elements.
  ----
  function has = |this, first, rest...| {
    if not(this: contains(first)) {
      return false
    } else {
      foreach (element in rest) {
        if not(this: contains(element)) {
          return false
        }
      }
    }
    return true
  }

  ----
  Convenience wrapper for `java.util.Collections.unmodifiableSet(...)`.
  ----
  function unmodifiableView = |this| -> java.util.Collections.unmodifiableSet(this)

  ----
  Finds the first element that satisfies a predicate `pred`, and returns it, or `null` if no element
  matches.
  ----
  function find = |this, pred| {
    foreach (element in this) {
      if pred(element) {
        return element
      }
    }
    return null
  }

  ----
  Filters the elements using a predicate, and returns a new collection.
  ----
  function filter = |this, pred| {
    let filtered = this: newWithSameType()
    foreach (element in this) {
      if pred(element) {
        filtered: include(element)
      }
    }
    return filtered
  }

  ----
  Transform each value using the `func` function, and returns a new set.
  ----
  function map = |this, func| {
    let mapped = this: newWithSameType()
    foreach (element in this) {
      mapped: include(func(element))
    }
    return mapped
  }
}

# ............................................................................................... #

----
Augmentations over maps.
----
augment java.util.Map {

  ----
  Alias for `put` that returns the map.
  ----
  function add = |this, key, value| {
    this: put(key, value)
    return this
  }

  ----
  Adds a tuple `[key, value]` or a map entry and returns the map.
  ----
  function add = |this, kv| {
    case {
      when kv oftype Tuple.class and kv: size() == 2 {
        this: put(kv: get(0), kv: get(1))
      }
      when kv oftype java.util.Map$Entry.class {
        this: put(kv: getKey(), kv: getValue())
      }
      otherwise {
        throw IllegalArgumentException(
          "expected a 2-tuple or a Map.Entry, got a " + kv: getClass())
      }
    }
    return this
  }

  ----
  Alias for `remove` that returns the map.
  ----
  function delete = |this, key| {
    this: remove(key)
    return this
  }

  ----
  Adds an element to the map only if there is no entry for that key.

  * `this`: a map.
  * `key`: the element key.
  * `value`: the element value or a function to evaluate to get a value.

  The fact that `value` can be a function allows for delayed evaluation which can be useful for
  performance reasons. So instead of:

      map: addIfAbsent(key, expensiveOperation())

  one may delay the evaluation as follows:

      map: addIfAbsent(key, -> expensiveOperation())

  `addIfAbsent` returns the map.
  ----
  function addIfAbsent = |this, key, value| {
    if not(this: containsKey(key)) {
      if isClosure(value) {
        this: put(key, value())
      } else {
        this: put(key, value)
      }
    }
    return this
  }

  ----
  Returns a value from a key or a default value if the entry is not defined.

  * `this`: a map.
  * `key`: the key to look for.
  * `replacement`: the default value, or a function giving the default value.

  As it is the case for [`addIfAbsent`](#java.util.Map.addifAbsent_3),
  one can take advantage of delayed evaluation:

      println(map: getOrElse(key, "n/a"))
      println(map: getOrElse(key, -> expensiveOperation())

  Note that `replacement` yields the return value also when there is an entry for `key` but the
  value is `null`.
  ----
  function getOrElse = |this, key, replacement| {
    let value = this: get(key)
    if value isnt null {
      return value
    }
    if isClosure(replacement) {
      return replacement()
    } else {
      return replacement
    }
  }

  ----
  Wrapper for `java.util.Collections.unmodifiableMap(...)`.
  ----
  function unmodifiableView = |this| -> java.util.Collections.unmodifiableMap(this)

  ----
  Returns a new empty map of the same type.
  ----
  function newWithSameType = |this| -> _newWithSameType(this)

  ----
  Returns the first element that satisfies a predicate, or `null` if none matches.

  `pred` takes 2 arguments: a key and a value, and returns a boolean.
  ----
  function find = |this, pred| {
    foreach (entry in this: entrySet()) {
      let key = entry: getKey()
      let value = entry: getValue()
      if pred(key, value) {
        return entry
      }
    }
    return null
  }

  ----
  Filters elements using a predicate, and returns a new map.

  `pred` takes 2 arguments: a key and a value, and returns a boolean.
  ----
  function filter = |this, pred| {
    let filtered = this: newWithSameType()
    foreach (entry in this: entrySet()) {
      let key = entry: getKey()
      let value = entry: getValue()
      if pred(key, value) {
        filtered: put(key, value)
      }
    }
    return filtered
  }

  ----
  Maps entries of the map using a function.

  `func` takes 2 arguments: a key and a value. The returned value must have `getKey()` and
  `getValue()` to represent a map entry. We suggest using the predefined `mapEntry(key, value)`
  function as it returns such object.
  ----
  function map = |this, func| {
    let mapped = this: newWithSameType()
    foreach (entry in this: entrySet()) {
      let key = entry: getKey()
      let value = entry: getValue()
      let result = func(key, value)
      mapped: put(result: getKey(), result: getValue())
    }
    return mapped
  }

  ----
  Reduces the entries of a map.

  `func` takes 3 arguments:

  * an accumulator whose initial value is `initialValue`,
  * a key for the next entry,
  * a value for the next entry.
  ----
  function reduce = |this, initialValue, func| {
    var acc = initialValue
    foreach (entry in this: entrySet()) {
      let key = entry: getKey()
      let value = entry: getValue()
      acc = func(acc, key, value)
    }
    return acc
  }

  ----
  Iterates over each entry of a map.

  `func` takes 2 arguments: the entry key and its value.
  ----
  function each = |this, func| {
    foreach (entry in this: entrySet()) {
      func(entry: getKey(), entry: getValue())
    }
    return this
  }

  ----
  Counts the number of elements satisfying a predicate.
  ----
  function count = |this, pred| ->
    this: filter(pred): size()

  ----
  Returns `true` if there is any value satisfying `pred`, `false` otherwise.
  ----
  function exists = |this, pred| ->
    this: filter(pred): size() > 0
}


augment java.util.Map$Entry {
  ----
  Destructurate a map entry in key and value
  ----
  function destruct = |this| -> [ this: getKey(), this: getValue() ]

  ----
  Convert then entry into an array containing the key and the value.
  ----
  function toArray = |this| -> array[this: getKey(), this: getValue()]
}
# ............................................................................................... #

----
Augmentations for Golo tuples.
----
augment gololang.Tuple {

  ----
  Returns the first element that satisfies a predicate, or `null` if none matches.
  ----
  function find = |this, pred| {
    foreach (element in this) {
      if pred(element) {
        return element
      }
    }
    return null
  }

  ----
  Filters elements using a predicate, returning a new tuple.
  ----
  function filter = |this, func| {
    let matching = list[]
    foreach element in this {
      if func(element) {
        matching: add(element)
      }
    }
    return gololang.Tuple.fromArray(matching: toArray())
  }

  ----
  Maps the elements of a tuple, and returns a tuple with the transformed values.
  ----
  function map = |this, func| {
    let values = list[]
    foreach element in this {
      values: add(func(element))
    }
    return gololang.Tuple.fromArray(values: toArray())
  }

  ----
  Joins the elements of a tuple into a string and using a separator.
  ----
  function join = |this, separator| -> _join(this, separator)
}

# ............................................................................................... #

----
Augment functions to make them behave more like objects from java.util.function
----
augment gololang.FunctionReference {
  ----
  Call this function with no arguments.
  ----
  function get = |this| {
    if not this: acceptArity(0) {
      throw UnsupportedOperationException(
        "`get` must be called on function accepting 0 parameter")
    }
    return this()
  }

  ----
  Alias for `FunctionReference::invoke`
  ----
  function apply = |this, args...| -> this: invoke(args)

  ----
  Alias for `FunctionReference::invoke`
  ----
  function accept = |this, args...| -> this: invoke(args)
}

</code>
</pre>
<link rel="stylesheet" href="http://golo-lang.org/documentation/next/styles/github.min.css"/>
<script src="http://golo-lang.org/documentation/next/highlight.min.js"></script>
<script>
hljs.initHighlighting();
</script>
</body>
</html>
